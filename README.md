# salaryCDYC开发计划

## 进度

- [x] 基础layouts页面

- [ ] 帮助页面

  - [ ] 计算

    TODO：个税计算公式

  - [ ] bug报告

    TODO：截图文件上传

  - [ ] 联系人列表

    TODO：等待财务给出系统上线后维护管理人员名单

  - [ ] 静态资源

    TODO：权责声明、Q&A列表

- [ ] 注册登录

  - [x] 注册
  - [x] 登录
  - [ ] 找回密码

- [x] 部门管理

- [x] 人员管理

- [x] 权限管理

  - [x] 角色管理

  - [x] 权限管理

  - [x] 权限调整

  - [x] 根据权限调整页面的展示

- [x] 薪酬管理

  - [x] 数据上传
  - [x] 数据验证
  - [x] 数据保存

- [x] 薪酬统计展示

  - [x] 个人薪酬统计
  - [x] 工资条打印

- [ ] 凭证

  - [ ] 凭证汇总表
  - [ ] 凭证模板显示
  - [ ] 凭证模板修改

- [ ] 接口

  - [ ] 协同平台验证接口
  - [ ] 凭证相关数据同步接口
  - [ ] ERP凭证上传接口

## 需求日志

### 2019-12-28

#### 薪酬导出字段调整
要求导出全部字段。

### 2019-09-16 需求确认

#### 凭证功能

- 凭证表

包括凭证名称、凭证分类、最后修改人ID。

- 凭证模板表

包括凭证ID、科目名称、科目编码、科目描述、科目借贷标识。此表采用软删除。

- 凭证数据明细表

包括凭证ID、凭证数据（JSON格式，mysql8.0支持）、凭证其他的字段、填报人员ID、凭证保存或上传的标识。

### 2019-09-03 需求确认

- `薪酬汇总表`上传的最后一步，需要显示各列汇总记录数和汇总金额。
- 确认凭证生成功能细节。薪酬相关的凭证有10张，包括`工资发放`、`其他工资`、`关联方`、`年金`、`退养金`、`公积金`、`保险费`、`福利费`、`计提费用`、`分配表`。
- `凭证汇总表`是根据`薪酬汇总表`中的员工所在部门的`DWDM`值来进行分类统计（主要统计的是`01开头`的部门）。
- 凭证功能要求能按照模板生成相应的凭证。凭证模板内容可编辑。
- 凭证表头中的`凭证批组`，`凭证名称`，`凭证描述`需要用户手动填写，其余内容应从ERP接口中获取。
- 凭证可手动新增科目。科目各类为下拉列表选择。
- 凭证提交前需验证借贷是否平衡。

### 2019-08-18 需求确认

- 按照最新汇总表的分类，创建分表：工资表、奖金表、其他费用表(稿酬表、特许使用权表、劳务报酬表)、社保表、补贴表、补发表、扣款表、专项税务表。
- 删除各表`upload_files`，`user_id`字段，在salary_info表中加入此字段。
- 依照最新的汇总表创建permission，保留基础信息分类下的`dwdm`，`转储姓名`，`保险编号`，`发放时间`字段，以及其他分类下的所有字段。
- `财务汇总数据上传` 则执行所有上传任务。
- 新建角色`工资条`。由人力资源部选择公布给普通用户的字段，存入角色所属权限。在用户查询工资汇总时，将权限（对应的字段名）作为查询字段传入，起到屏蔽某些隐私字段的作用。
- 会计期使用时间戳。
- 奖金表中的课酬、劳动竞赛通过协同平台接口获取明细数据，通过会计期关联。

## 更新说明

### v0.3.200111
* 完成发送站内信功能。
* 完成站内信浏览查看功能。

### v0.2.191228
* 完成薪酬分表数据计算功能测试。
* 完成薪酬数据导出功能。

### v0.2.191124
* 修改薪酬数据计算公式。

### v0.1.191025
* 完成系统部署。centos8+mysql8+php7.2

 192.168.23.6
 root
 3xia5chu2
